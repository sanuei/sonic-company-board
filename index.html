<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sonic‰∏Ä‰∫∫ÂÖ¨Âè∏ - AIËôöÊãüÂäûÂÖ¨ÂÆ§</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(180deg, #0a0a1a 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            color: #fff;
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(90deg, #1e1e3f 0%, #2d2d5a 100%);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 22px;
            display: flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(90deg, #00d4ff, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header h1 span { font-size: 26px; }

        .status-badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        /* Office Container */
        .office-container {
            display: flex;
            height: calc(100vh - 70px);
        }

        /* Virtual Office */
        .office {
            flex: 1;
            position: relative;
            background: 
                linear-gradient(180deg, rgba(30,30,60,0.9) 0%, rgba(20,20,40,0.95) 100%),
                repeating-linear-gradient(0deg, transparent, transparent 50px, rgba(255,255,255,0.03) 50px, rgba(255,255,255,0.03) 51px);
            overflow: hidden;
            min-height: 600px;
        }

        .office-floor {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 40%;
            background: linear-gradient(180deg, #2d2d5a 0%, #1e1e3f 100%);
            border-top: 3px solid rgba(255,255,255,0.1);
        }

        .office-desk {
            position: absolute;
            bottom: 30%;
            width: 120px;
            height: 60px;
            background: linear-gradient(180deg, #4a4a6a 0%, #3a3a5a 100%);
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .office-desk::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 10px;
            right: 10px;
            height: 10px;
            background: linear-gradient(180deg, #5a5a7a 0%, #4a4a6a 100%);
            border-radius: 4px 4px 0 0;
        }

        /* Desk positions */
        .desk-ceo { left: 10%; }
        .desk-product { left: 30%; }
        .desk-design { left: 50%; }
        .desk-dev { left: 70%; }
        .desk-ops { left: 90%; transform: translateX(-50%); }

        /* AI Avatars */
        .avatar {
            position: absolute;
            bottom: calc(30% + 70px);
            width: 70px;
            height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            z-index: 10;
        }

        .avatar:hover {
            transform: scale(1.1);
            z-index: 20;
        }

        .avatar-body {
            width: 50px;
            height: 60px;
            border-radius: 25px 25px 15px 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        .avatar.working .avatar-body {
            animation: working 1s ease-in-out infinite;
        }

        @keyframes working {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .avatar.talking .avatar-body {
            animation: talking 0.5s ease-in-out infinite;
        }

        @keyframes talking {
            0%, 100% { transform: rotate(-5deg); }
            50% { transform: rotate(5deg); }
        }

        .avatar.idle .avatar-body {
            opacity: 0.7;
        }

        .avatar-ceo .avatar-body { background: linear-gradient(135deg, #f59e0b, #ef4444); }
        .avatar-product .avatar-body { background: linear-gradient(135deg, #3b82f6, #8b5cf6); }
        .avatar-design .avatar-body { background: linear-gradient(135deg, #ec4899, #f43f5e); }
        .avatar-dev .avatar-body { background: linear-gradient(135deg, #10b981, #14b8a6); }
        .avatar-ops .avatar-body { background: linear-gradient(135deg, #f59e0b, #eab308); }

        .avatar-head {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(180deg, #ffd700, #ffaa00);
            margin-bottom: -10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            z-index: 1;
        }

        .avatar-name {
            font-size: 11px;
            font-weight: bold;
            margin-top: 5px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            white-space: nowrap;
        }

        .avatar-status {
            font-size: 9px;
            padding: 2px 8px;
            border-radius: 10px;
            margin-top: 2px;
        }

        .avatar-status.working { background: #10b981; }
        .avatar-status.idle { background: #f59e0b; }
        .avatar-status.talking { background: #3b82f6; }
        .avatar-status.thinking { background: #8b5cf6; }

        /* Avatar positions */
        .pos-ceo { left: calc(10% - 35px); }
        .pos-product { left: calc(30% - 35px); }
        .pos-design { left: calc(50% - 35px); }
        .pos-dev { left: calc(70% - 35px); }
        .pos-ops { left: calc(90% - 35px); }

        /* Speech Bubble */
        .speech-bubble {
            position: absolute;
            bottom: 120px;
            background: rgba(255,255,255,0.95);
            color: #000;
            padding: 10px 15px;
            border-radius: 15px;
            font-size: 12px;
            max-width: 150px;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s;
            z-index: 100;
            pointer-events: none;
        }

        .speech-bubble.show {
            opacity: 1;
            transform: translateY(0);
        }

        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border: 10px solid transparent;
            border-top-color: rgba(255,255,255,0.95);
        }

        /* Sidebar */
        .sidebar {
            width: 350px;
            background: rgba(20, 20, 40, 0.95);
            border-left: 1px solid rgba(255,255,255,0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .sidebar-section {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Chat Messages */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }

        .chat-message {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .chat-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .chat-avatar.ceo { background: linear-gradient(135deg, #f59e0b, #ef4444); }
        .chat-avatar.product { background: linear-gradient(135deg, #3b82f6, #8b5cf6); }
        .chat-avatar.design { background: linear-gradient(135deg, #ec4899, #f43f5e); }
        .chat-avatar.dev { background: linear-gradient(135deg, #10b981, #14b8a6); }
        .chat-avatar.ops { background: linear-gradient(135deg, #f59e0b, #eab308); }

        .chat-content {
            flex: 1;
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .chat-name {
            font-weight: bold;
            font-size: 13px;
        }

        .chat-time {
            font-size: 10px;
            opacity: 0.6;
        }

        .chat-text {
            font-size: 12px;
            line-height: 1.5;
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 10px;
            border-top-left-radius: 2px;
        }

        /* Task List in Sidebar */
        .task-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 12px;
        }

        .task-item-owner {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .task-status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .task-status-dot.todo { background: #f59e0b; }
        .task-status-dot.progress { background: #3b82f6; }
        .task-status-dot.done { background: #10b981; }

        /* Control Panel */
        .controls {
            padding: 15px;
            background: rgba(0,0,0,0.3);
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
            background: rgba(255,255,255,0.1);
            color: white;
        }

        .control-btn:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.05);
        }

        .control-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        /* Office decorations */
        .window {
            position: absolute;
            top: 50px;
            width: 100px;
            height: 150px;
            background: linear-gradient(180deg, #1a3a5a 0%, #0a2a4a 100%);
            border: 4px solid #3a3a5a;
            border-radius: 50px 50px 0 0;
        }

        .window::after {
            content: '';
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 130px;
            background: #3a3a5a;
        }

        .window::before {
            content: '';
            position: absolute;
            top: 75px;
            left: 10px;
            right: 10px;
            height: 2px;
            background: #3a3a5a;
        }

        .window-1 { left: 5%; }
        .window-2 { left: 35%; }
        .window-3 { left: 65%; }

        .plant {
            position: absolute;
            bottom: 40%;
            font-size: 40px;
        }

        .plant-1 { left: 25%; }
        .plant-2 { left: 55%; }
        .plant-3 { left: 85%; }

        /* Clock */
        .clock {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 24px;
            font-weight: bold;
            color: #00d4ff;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        /* Interaction Effect */
        .interaction-line {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, transparent, #00d4ff, transparent);
            transform-origin: left center;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 5;
        }

        .interaction-line.show {
            opacity: 1;
            animation: linePulse 1s ease-in-out infinite;
        }

        @keyframes linePulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 900px) {
            .office-container {
                flex-direction: column;
            }
            .sidebar {
                width: 100%;
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1><span>üè¢</span> Sonic‰∏Ä‰∫∫ÂÖ¨Âè∏ - ËôöÊãüÂäûÂÖ¨ÂÆ§</h1>
        <span class="status-badge">‚óè Âú®Á∫ø</span>
    </div>

    <div class="office-container">
        <!-- Virtual Office -->
        <div class="office">
            <!-- Clock -->
            <div class="clock" id="clock">00:00</div>
            
            <!-- Windows -->
            <div class="window window-1"></div>
            <div class="window window-2"></div>
            <div class="window window-3"></div>
            
            <!-- Plants -->
            <div class="plant plant-1">üåø</div>
            <div class="plant plant-2">ü™¥</div>
            <div class="plant plant-3">üåµ</div>
            
            <!-- Interaction Lines -->
            <div class="interaction-line" id="line-1"></div>
            <div class="interaction-line" id="line-2"></div>
            <div class="interaction-line" id="line-3"></div>
            
            <!-- Floor -->
            <div class="office-floor"></div>
            
            <!-- Desks -->
            <div class="office-desk desk-ceo"></div>
            <div class="office-desk desk-product"></div>
            <div class="office-desk desk-design"></div>
            <div class="office-desk desk-dev"></div>
            <div class="office-desk desk-ops"></div>
            
            <!-- Avatars -->
            <div class="avatar avatar-ceo pos-ceo" id="avatar-ceo">
                <div class="avatar-head">üëî</div>
                <div class="avatar-body">üíº</div>
                <div class="avatar-name">CEO</div>
                <div class="avatar-status working" id="status-ceo">Â∑•‰Ωú‰∏≠</div>
                <div class="speech-bubble" id="bubble-ceo"></div>
            </div>
            
            <div class="avatar avatar-product pos-product" id="avatar-product">
                <div class="avatar-head">üìã</div>
                <div class="avatar-body">üìä</div>
                <div class="avatar-name">‰∫ßÂìÅ</div>
                <div class="avatar-status working" id="status-product">Â∑•‰Ωú‰∏≠</div>
                <div class="speech-bubble" id="bubble-product"></div>
            </div>
            
            <div class="avatar avatar-design pos-design" id="avatar-design">
                <div class="avatar-head">üé®</div>
                <div class="avatar-body">‚úèÔ∏è</div>
                <div class="avatar-name">ËÆæËÆ°</div>
                <div class="avatar-status working" id="status-design">Â∑•‰Ωú‰∏≠</div>
                <div class="speech-bubble" id="bubble-design"></div>
            </div>
            
            <div class="avatar avatar-dev pos-dev" id="avatar-dev">
                <div class="avatar-head">üíª</div>
                <div class="avatar-body">‚å®Ô∏è</div>
                <div class="avatar-name">ÂºÄÂèë</div>
                <div class="avatar-status working" id="status-dev">Â∑•‰Ωú‰∏≠</div>
                <div class="speech-bubble" id="bubble-dev"></div>
            </div>
            
            <div class="avatar avatar-ops pos-ops" id="avatar-ops">
                <div class="avatar-head">üìà</div>
                <div class="avatar-body">üì±</div>
                <div class="avatar-name">ËøêËê•</div>
                <div class="avatar-status working" id="status-ops">Â∑•‰Ωú‰∏≠</div>
                <div class="speech-bubble" id="bubble-ops"></div>
            </div>
        </div>
        
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">ü§ñ AIÂõ¢ÈòüÁä∂ÊÄÅ</div>
                <div class="task-list" id="agent-status-list"></div>
            </div>
            
            <div class="chat-messages" id="chat-messages">
                <!-- Chat messages will appear here -->
            </div>
            
            <div class="controls">
                <button class="control-btn active" onclick="setMode('auto')">ü§ñ Ëá™Âä®Ê®°Âºè</button>
                <button class="control-btn" onclick="simulateInteraction()">üí¨ Ê®°ÊãüÂØπËØù</button>
                <button class="control-btn" onclick="resetAvatars()">üîÑ ÈáçÁΩÆ</button>
            </div>
        </div>
    </div>

    <script>
        // Agent Data
        const agents = [
            { id: 'ceo', name: 'CEO', role: 'ÂïÜ‰∏öÂÜ≥Á≠ñ', emoji: 'üíº', color: '#f59e0b' },
            { id: 'product', name: '‰∫ßÂìÅÁªèÁêÜ', role: '‰∫ßÂìÅËßÑÂàí', emoji: 'üìä', color: '#3b82f6' },
            { id: 'design', name: 'ËÆæËÆ°Â∏à', role: 'UI/UX', emoji: '‚úèÔ∏è', color: '#ec4899' },
            { id: 'dev', name: 'ÂºÄÂèë', role: 'ÊäÄÊúØÂÆûÁé∞', emoji: '‚å®Ô∏è', color: '#10b981' },
            { id: 'ops', name: 'ËøêËê•', role: 'Êé®ÂπøËøêËê•', emoji: 'üì±', color: '#eab308' }
        ];

        // Tasks
        let tasks = [
            { id: 1, title: "ÂàõÂª∫HomeViewModel", owner: "@dev", status: "progress" },
            { id: 2, title: "Êé•ÂÖ•MiniMax API", owner: "@dev", status: "todo" },
            { id: 3, title: "ÂêéÁ´ØAPIÊê≠Âª∫", owner: "@dev", status: "progress" },
            { id: 4, title: "UIÊñ∞‰∏≠ÂºèÈ£éÊ†º", owner: "@design", status: "progress" },
            { id: 5, title: "Âà∂ÂÆöÊé®ÂπøÁ≠ñÁï•", owner: "@ops", status: "progress" },
            { id: 6, title: "MVPÂäüËÉΩÁ°ÆËÆ§", owner: "@product", status: "done" },
            { id: 7, title: "È°πÁõÆÂêØÂä®", owner: "@ceo", status: "done" },
        ];

        // Chat messages
        let chatHistory = [
            { agent: 'dev', text: 'ÂêéÁ´ØAPIÂ∑≤ÂÆåÊàê60%ÔºåÊ≠£Âú®Êé•ÂÖ•MiniMax SDK', time: '22:03' },
            { agent: 'design', text: 'UIÈ£éÊ†ºÂ∑≤Á°ÆÂÆöÔºåÂºÄÂßãÁªÑ‰ª∂ÂºÄÂèë', time: '22:01' },
            { agent: 'ops', text: 'Êé®ÂπøÊñπÊ°àÂ∑≤Êèê‰∫§ÔºåÁ≠âÂæÖCEOÂÆ°Êâπ', time: '21:58' },
            { agent: 'product', text: 'MVPÂäüËÉΩÂàóË°®Â∑≤Á°ÆËÆ§', time: '21:55' },
            { agent: 'ceo', text: 'RoomAIÈ°πÁõÆÊ≠£ÂºèÂêØÂä®ÔºÅ', time: '21:50' },
        ];

        // Sample dialogues for simulation
        const dialogues = [
            { from: 'ceo', to: 'product', text: '@product MVPÂäüËÉΩ‰ºòÂÖàÁ∫ßÁ°ÆËÆ§‰∫ÜÂêóÔºü' },
            { from: 'product', to: 'ceo', text: 'Â∑≤Á°ÆËÆ§ÔºåP0ÂäüËÉΩÂåÖÊã¨Êà∑ÂûãÂõæ‰∏ä‰º†ÂíåAIËØÜÂà´' },
            { from: 'product', to: 'design', text: '@design UIËÆæËÆ°Á®ø‰ªÄ‰πàÊó∂ÂÄôËÉΩÂÆåÊàêÔºü' },
            { from: 'design', to: 'product', text: 'È¢ÑËÆ°ÊòéÂ§©ÂÆåÊàêÂàùÁâàËÆæËÆ°' },
            { from: 'dev', to: 'design', text: '@design ÈúÄË¶Å‰∏Ä‰∏™Âä†ËΩΩÂä®ÁîªÁ¥†Êùê' },
            { from: 'design', to: 'dev', text: 'Á®çÂêéÂèëÁªô‰Ω†ÔºåÊòØÊ∞¥Â¢®ÊôïÊüìÊïàÊûú' },
            { from: 'ops', to: 'ceo', text: '@ceo Êé®ÂπøÈ¢ÑÁÆóÈúÄË¶ÅÁ°ÆËÆ§' },
            { from: 'ceo', to: 'ops', text: 'ÂÖàÊåâÊúÄÂ∞èÂèØË°åÊÄßÈ¢ÑÁÆóÊù•ÔºåÊâßË°åÂêß' },
        ];

        let currentDialogue = 0;
        let autoMode = true;
        let dialogueInterval;

        // Clock
        function updateClock() {
            const now = new Date();
            const time = now.toLocaleTimeString('zh-CN', { 
                timeZone: 'Asia/Tokyo',
                hour: '2-digit', 
                minute: '2-digit' 
            });
            document.getElementById('clock').textContent = time;
        }
        setInterval(updateClock, 1000);
        updateClock();

        // Render Agent Status
        function renderAgentStatus() {
            const list = document.getElementById('agent-status-list');
            list.innerHTML = agents.map(agent => {
                const agentTasks = tasks.filter(t => t.owner === '@' + agent.id);
                const progress = agentTasks.filter(t => t.status === 'progress').length;
                const done = agentTasks.filter(t => t.status === 'done').length;
                
                return `
                    <div class="task-item">
                        <div class="task-item-owner">
                            <span style="font-size:16px">${agent.emoji}</span>
                            <span>${agent.name}</span>
                        </div>
                        <span style="color: ${agent.color}">${done}/${agentTasks.length}</span>
                    </div>
                `;
            }).join('');
        }

        // Render Chat
        function renderChat() {
            const container = document.getElementById('chat-messages');
            container.innerHTML = chatHistory.map(msg => {
                const agent = agents.find(a => a.id === msg.agent);
                return `
                    <div class="chat-message">
                        <div class="chat-avatar ${msg.agent}">${agent.emoji}</div>
                        <div class="chat-content">
                            <div class="chat-header">
                                <span class="chat-name" style="color: ${agent.color}">${agent.name}</span>
                                <span class="chat-time">${msg.time}</span>
                            </div>
                            <div class="chat-text">${msg.text}</div>
                        </div>
                    </div>
                `;
            }).join('');
            container.scrollTop = container.scrollHeight;
        }

        // Show Speech Bubble
        function showSpeechBubble(agentId, text) {
            const bubble = document.getElementById('bubble-' + agentId);
            bubble.textContent = text;
            bubble.classList.add('show');
            
            // Set avatar to talking state
            const avatar = document.getElementById('avatar-' + agentId);
            avatar.classList.add('talking');
            
            setTimeout(() => {
                bubble.classList.remove('show');
                avatar.classList.remove('talking');
            }, 3000);
        }

        // Update Avatar Status
        function updateAvatarStatus(agentId, status, statusText) {
            const avatar = document.getElementById('avatar-' + agentId);
            const statusEl = document.getElementById('status-' + agentId);
            
            avatar.className = 'avatar avatar-' + agentId + ' ' + status;
            statusEl.className = 'avatar-status ' + status;
            statusEl.textContent = statusText;
        }

        // Simulate Interaction
        function simulateInteraction() {
            if (currentDialogue >= dialogues.length) {
                currentDialogue = 0;
            }
            
            const dialogue = dialogues[currentDialogue];
            
            // Show speech from sender
            setTimeout(() => {
                showSpeechBubble(dialogue.from, dialogue.text);
                addChatMessage(dialogue.from, dialogue.text);
                updateAvatarStatus(dialogue.from, 'talking', 'ÂØπËØù‰∏≠');
            }, 500);
            
            // Show response from receiver
            setTimeout(() => {
                const responses = [
                    { from: 'product', text: 'Â•ΩÁöÑÔºåÊàëÊù•Â§ÑÁêÜ' },
                    { from: 'design', text: 'ÊòéÁôΩ‰∫Ü' },
                    { from: 'dev', text: 'Êî∂Âà∞' },
                    { from: 'ops', text: 'Ê≤°ÈóÆÈ¢ò' },
                    { from: 'ceo', text: 'ÂæàÂ•ΩÔºåÁªßÁª≠Êé®Ëøõ' },
                ];
                const response = responses[Math.floor(Math.random() * responses.length)];
                showSpeechBubble(response.from, response.text);
                addChatMessage(response.from, response.text);
                updateAvatarStatus(response.from, 'talking', 'ÂõûÂ§ç‰∏≠');
            }, 3500);
            
            // Reset after interaction
            setTimeout(() => {
                agents.forEach(agent => {
                    updateAvatarStatus(agent.id, 'working', 'Â∑•‰Ωú‰∏≠');
                });
            }, 6000);
            
            currentDialogue++;
        }

        // Add Chat Message
        function addChatMessage(agentId, text) {
            const now = new Date();
            const time = now.toLocaleTimeString('zh-CN', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            chatHistory.unshift({ agent: agentId, text: text, time: time });
            if (chatHistory.length > 20) chatHistory.pop();
            
            renderChat();
        }

        // Auto Mode
        function setMode(mode) {
            autoMode = mode === 'auto';
            
            document.querySelectorAll('.control-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (autoMode) {
                startAutoMode();
            } else {
                stopAutoMode();
            }
        }

        function startAutoMode() {
            dialogueInterval = setInterval(() => {
                simulateInteraction();
            }, 10000);
        }

        function stopAutoMode() {
            clearInterval(dialogueInterval);
        }

        // Reset Avatars
        function resetAvatars() {
            agents.forEach(agent => {
                updateAvatarStatus(agent.id, 'working', 'Â∑•‰Ωú‰∏≠');
            });
            document.querySelectorAll('.speech-bubble').forEach(b => b.classList.remove('show'));
        }

        // Initialize
        renderAgentStatus();
        renderChat();
        startAutoMode();

        // Random status changes
        setInterval(() => {
            if (Math.random() > 0.7) {
                const randomAgent = agents[Math.floor(Math.random() * agents.length)];
                const statuses = [
                    { status: 'thinking', text: 'ÊÄùËÄÉ‰∏≠...' },
                    { status: 'idle', text: 'Á©∫Èó≤' },
                    { status: 'working', text: 'Â∑•‰Ωú‰∏≠' }
                ];
                const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
                updateAvatarStatus(randomAgent.id, randomStatus.status, randomStatus.text);
            }
        }, 5000);
    </script>
</body>
</html>
